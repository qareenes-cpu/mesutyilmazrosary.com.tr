<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eser Detayı | Mesut Yılmaz</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <!-- NAVIGATION -->
    <nav class="main-nav">
        <div class="container nav-container">
            <a href="index.html" class="nav-logo">
                <img src="assets/logo.svg" alt="Mesut Yılmaz">
            </a>
            <div class="nav-links">
                <a href="vitrin.html">Vitrin</a>
                <a href="sorgula.html">Sorgula</a>
                <a href="iletisim.html">İletişim</a>
                <a href="https://www.instagram.com/46mesut_yilmaz?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="
                    target="_blank" class="instagram-link">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="width:18px; height:18px;">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </a>
                <a href="admin.html" class="admin-icon-link" title="Yönetim">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="width:18px; height:18px;">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <main class="container detail-container">
        <div id="loading" class="text-center" style="padding: 100px 0;">
            <p style="color: var(--text-secondary);">Eser detayları hazırlanıyor...</p>
        </div>

        <div id="detail-card" class="product-detail-grid" style="display: none;">
            <!-- Gallery -->
            <div class="detail-gallery">
                <img id="p-img" src="" alt="" class="detail-img">
            </div>

            <!-- Content -->
            <div class="detail-content">
                <div class="breadcrumb" style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 20px;">
                    Ana Sayfa / <span id="p-cat-bread"></span> / <strong id="p-name-bread"
                        style="color: #fff;"></strong>
                </div>

                <h1 id="p-name"></h1>

                <div class="attr-table">
                    <div class="attr-row">
                        <span class="attr-label">Seri Numarası :</span>
                        <span class="attr-value" id="p-series"></span>
                    </div>
                    <div class="attr-row">
                        <span class="attr-label">Sanatkar :</span>
                        <span class="attr-value" id="p-master"></span>
                    </div>
                    <div class="attr-row">
                        <span class="attr-label">Materyal :</span>
                        <span class="attr-value" id="p-material"></span>
                    </div>
                    <div class="attr-row">
                        <span class="attr-label">Tane Sayısı :</span>
                        <span class="attr-value" id="p-bead-count"></span>
                    </div>
                    <div class="attr-row">
                        <span class="attr-label">Tane Boyutu :</span>
                        <span class="attr-value" id="p-bead-size"></span>
                    </div>
                    <div class="attr-row">
                        <span class="attr-label">İmame Motifi :</span>
                        <span class="attr-value" id="p-imame-motif"></span>
                    </div>
                    <div class="attr-row">
                        <span class="attr-label">İmame Boyutu :</span>
                        <span class="attr-value" id="p-imame-size"></span>
                    </div>
                </div>

                <div class="whatsapp-box">
                    <p class="whatsapp-info">Bu ürün hakkında detaylı bilgi alabilirsiniz.</p>
                    <a id="p-wa" href="#" target="_blank" class="btn-whatsapp">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M12.031 6.172c-2.32 0-4.591.398-6.758 1.189-.306.112-.618.33-.867.645l-1.547 2.055c-.383.51-.313 1.21.158 1.621l3.928 3.42c.444.387 1.11.356 1.503-.069l1.414-1.536c.745.32 1.492.515 2.214.515 1.73 0 3.32-.485 4.707-1.3l2.25 2.25c.421.422 1.103.423 1.524.002.422-.421.423-1.103.002-1.524l-2.25-2.25c.815-1.387 1.3-2.977 1.3-4.707 0-5.138-4.174-9.313-9.312-9.313z">
                            </path>
                        </svg>
                        WHATSAPP İLE BİLGİ AL
                    </a>
                </div>

                <div class="detail-footer-info">
                    <p><strong>Stok kodu:</strong> <span id="p-stock"></span></p>
                    <p><strong>Kategoriler:</strong> <span id="p-cat"></span></p>
                </div>
            </div>
        </div>
    </main>

    <footer style="margin-top: 100px;">
        <div class="container">
            <p class="copyright">© 2026 Mesut Yılmaz Tesbih Vitrini. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');

        async function loadProduct() {
            if (!productId) {
                window.location.href = 'vitrin.html';
                return;
            }

            try {
                const response = await fetch(`/api/products/${productId}`);
                const p = await response.json();

                if (p.error) {
                    document.getElementById('loading').innerHTML = '<p style="color: #ff453a;">Eser bulunamadı.</p>';
                    return;
                }

                renderProduct(p);
            } catch (err) {
                console.error(err);
                document.getElementById('loading').innerHTML = '<p style="color: #ff453a;">Bir hata oluştu.</p>';
            }
        }

        function renderProduct(p) {
            document.title = `${p.name} | Mesut Yılmaz`;
            document.getElementById('p-img').src = p.image_url || 'assets/placeholder.png';
            document.getElementById('p-cat-bread').textContent = p.category || 'Tesbih';
            document.getElementById('p-name-bread').textContent = p.name;
            document.getElementById('p-name').textContent = p.name;
            document.getElementById('p-series').textContent = p.series_number || '-';
            document.getElementById('p-master').textContent = p.master || 'Mesut Yılmaz';
            document.getElementById('p-material').textContent = p.material || '-';
            document.getElementById('p-bead-count').textContent = p.bead_count || '-';
            document.getElementById('p-bead-size').textContent = p.bead_size || '-';
            document.getElementById('p-imame-motif').textContent = p.imame_motif || '-';
            document.getElementById('p-imame-size').textContent = p.imame_size || '-';
            document.getElementById('p-stock').textContent = p.stock_code || p.product_code;
            document.getElementById('p-cat').textContent = p.category || 'Genel';

            // WhatsApp link
            const waMsg = encodeURIComponent(`Merhaba, ${p.name} (${p.stock_code || p.product_code}) ürünü hakkında bilgi almak istiyorum.`);
            document.getElementById('p-wa').href = `https://wa.me/905350580363?text=${waMsg}`;

            document.getElementById('loading').style.display = 'none';
            document.getElementById('detail-card').style.display = 'grid';
        }

        document.addEventListener('DOMContentLoaded', loadProduct);
    </script>
    <script src="script.js"></script>
    <script src="mobile.js"></script>
</body>

</html>